!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.worldviewjs=e():t.worldviewjs=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(8),a=r(o);e.default=a.default},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=e.PI=Math.PI,r=(e.sin=function(t){return Math.sin(t/180*n)},e.cos=function(t){return Math.cos(t/180*n)},e.avg=function(t,e){return(t+e)/2});e.delta=function(t,e){return t-e},e.bounded=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-(1/0),e=arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;return Math.min(n,Math.max(t,e))},e.isBounded=function(t,e,n){return t<=e&&e<=n},e.ops={"+":function(t,e){return t+e},"-":function(t,e){return t-e},"*":function(t,e){return t*e},"/":function(t,e){return t/e},avg:r}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.abs=e.zero=e.normalize=e.norm=e.bounded=e.max=e.min=e.dotProduct=e.sub=e.add=e.scale=void 0;var r=n(1),o=function(t){return function(e,n){return e.map(function(r,o){return t(e[o],n[o])})}},a=e.scale=function(t,e){return e.map(function(e){return t*e})},i=e.add=o(r.ops["+"]),u=e.sub=o(r.ops["-"]),c=e.dotProduct=o(r.ops["*"]),f=e.min=o(Math.min),d=e.max=o(Math.max),s=e.bounded=function(t,e,n){return f(d(t,e),n)},l=e.norm=function(t){return Math.sqrt(c(t,t).reduce(r.ops["+"]))},v=e.normalize=function(t){return a(1/l(t),t)},p=e.zero=Object.freeze([0,0]),m=e.abs=function(t){return t.map(Math.abs)};e.default={abs:m,add:i,bounded:s,max:d,min:f,norm:l,normalize:v,scale:a,sub:u,zero:p}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.centerContainer_world=e.centerContainer_document=e.center_container=e.centerWorld_container=e.centerWorld_document=e.center_world=void 0;var o=n(2),a=r(o),i=n(4),u=e.center_world=function(t){return a.default.scale(.5,t.worldSize)},c=(e.centerWorld_document=function(t){return(0,i.fromWorldToDocument)(t,u(t))},e.centerWorld_container=function(t){return(0,i.fromWorldToContainer)(t,u(t))},e.center_container=function(t){return a.default.scale(.5,t.containerSize)});e.centerContainer_document=function(t){return(0,i.fromContainerToDocument)(t,c(t))},e.centerContainer_world=function(t){return(0,i.fromContainerToWorld)(t,c(t))}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.fromDocumentToWorld=e.fromWorldToDocument=e.fromContainerToWorld=e.fromWorldToContainer=e.fromContainerToDocument=e.fromDocumentToContainer=void 0;var o=n(2),a=r(o),i=n(7),u=r(i),c=e.fromDocumentToContainer=function(t,e){var n=t.container_document;return a.default.sub(e,n)},f=e.fromContainerToDocument=function(t,e){var n=t.container_document;return a.default.add(e,n)},d=e.fromWorldToContainer=function(t,e){var n=t.scale,r=t.theta,o=t.world_container;return a.default.add(a.default.scale(n,u.default.product((0,i.R)(r),e)),o)},s=e.fromContainerToWorld=function(t,e){var n=t.scale,r=t.theta,o=t.world_container;return a.default.scale(1/n,u.default.product((0,i.R)(-r),a.default.sub(e,o)))};e.fromWorldToDocument=function(t,e){var n=d(t,e);return f(t,n)},e.fromDocumentToWorld=function(t,e){var n=c(t,e);return s(t,n)}},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function o(t){return t&&t.__esModule?t:{default:t}}function a(t,e){var n=t.worldSize,r=t.containerSize,o=u(t,e),a=m.bounded(e.minZoom,Math.max(o,t.scale),e.maxZoom);return c({},t,{scale:a,world_container:d.default.bounded(d.default.sub(r,d.default.scale(a,n)),t.world_container,d.default.zero)})}function i(t,e){var n=t.worldSize,r=t.containerSize,o=u(t,e,Math.min),a=d.default.scale(.5,d.default.sub(d.default.scale(1/o,r),n)),i=m.bounded(e.minZoom,Math.max(o,t.scale),e.maxZoom),f=d.default.bounded(d.default.sub(r,d.default.scale(i,d.default.add(n,a))),t.world_container,d.default.scale(i,a));return c({},t,{scale:i,world_container:f})}function u(t){var e=t.worldSize,n=t.containerSize,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=r.fitMarginX,a=void 0===o?0:o,i=r.fitMarginY,u=void 0===i?0:i,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Math.max,f=(n[0]-2*a)/e[0],d=(n[1]-2*u)/e[1];return c(f,d)}Object.defineProperty(e,"__esModule",{value:!0}),e.fit=e.statelessRotateBy=e.statelessPanBy=e.statelessZoom=e.reduce=e.identity=e.set=void 0;var c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};e.scaleLimit=u;var f=n(2),d=o(f),s=n(7),l=o(s),v=n(6),p=n(1),m=r(p);e.set=function(t,e){return function(n){return(0,v.setState)(n,t,e)}},e.identity=function(t){return t},e.reduce=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments[1];return[].concat(t).reduce(function(t,e){return e(t)},e)},e.statelessZoom=function(t,e){return function(n){var r=n.scale,o=n.world_container,a=d.default.add(e,d.default.scale(t/r,d.default.sub(o,e)));return c({},n,{world_container:a,scale:t})}},e.statelessPanBy=function(t){return function(e){var n=e.world_container,r=d.default.add(t,n);return c({},e,{world_container:r})}},e.statelessRotateBy=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0];return function(n){var r=n.theta,o=n.theta+t,a=n.world_container,i=d.default.sub(e,l.default.product(l.default.product((0,s.R)(o),(0,s.R)(-r)),d.default.sub(e,a)));return c({},n,{theta:o,world_container:i})}},e.fit=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e){return t.fitNoWhitespace?a(e,t):i(e,t)}}},function(t,e){"use strict";function n(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}Object.defineProperty(e,"__esModule",{value:!0});var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};e.flow=function t(){for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];return function(e){var o=n[0],a=n.slice(1);return o?t.apply(void 0,r(a))(o(e)):e}},e.setState=function(t,e,r){return o({},t,n({},e,r))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.add=e.sub=e.product=e.scale=e.R=void 0;var r=n(1),o=function(t){return t instanceof Array&&"number"==typeof t[0]},a=function(t){return t instanceof Array&&t[0]instanceof Array&&"number"==typeof t[0][0]},i=e.R=function(t){return[[(0,r.cos)(t),-(0,r.sin)(t)],[(0,r.sin)(t),(0,r.cos)(t)]]},u=e.scale=function(t,e){return e.map(function(e){return e.map(function(e){return t*e})})},c=e.product=function(t,e){if(o(e))return[t[0][0]*e[0]+t[0][1]*e[1],t[1][0]*e[0]+t[1][1]*e[1]];if(a(e)){var n=[[void 0,void 0],[void 0,void 0]];return n.map(function(r,o){return n.map(function(n,r){return t[o][0]*e[0][r]+t[o][1]*e[1][r]})})}throw new Error("What are you trying to do?")},f=function(t,e,n){return[[n(t[0][0],e[0][0]),n(t[0][1],e[0][1])],[n(t[1][0],e[1][0]),n(t[1][1],e[1][1])]]},d=e.sub=function(t,e){return f(t,e,r.ops["-"])},s=e.add=function(t,e){return f(t,e,r.ops["+"])};e.default={R:i,add:s,product:c,scale:u,sub:d}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return _.isZoomedOut(t)}function r(t,e,n,r){_.setWorldSize(t,e),_.setContainerSize(n,r),_.resetZoom(),y()}function o(t,e){_.resetContainerSize(t,e),y()}function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{pageX:void 0,pageY:void 0},n=t>0?1.03:.97,r="number"==typeof e.pageX?l(e):void 0;_.zoomBy(n,r),y()}function c(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{pageX:void 0,pageY:void 0},n="number"==typeof e.pageX?l(e):void 0;_.zoomBy(t,n),y()}function p(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{pageX:void 0,pageY:void 0};v("panStart",t),j.isPanning=!0,j.panStart=[t.pageX,t.pageY]}function m(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{pageX:void 0,pageY:void 0};j.isPanning&&(v("panMove",t),j.panEnd=[t.pageX,t.pageY],_.panBy(f.default.sub(j.panEnd,j.panStart)),j.panStart=j.panEnd,y())}function b(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{pageX:void 0,pageY:void 0};j.isPanning&&(v("panEnd",t),j.isPanning=!1,j.panEnd=[t.pageX,t.pageY])}function g(t,e){if(void 0===t||void 0===e)throw new Error("InvalidArguments: panBy(dx, dy) called with "+t+", "+e);_.panBy([t,e]),y()}function h(t){var e=t.translate,n=t.rotate,r=t.scale,o=function(t,e){var n=a(e,2),r=n[0],o=n[1];return"\n      translate("+-r+"px, "+-o+"px)\n      "+t+"\n      translate("+r+"px, "+o+"px)\n    "};return{translate:e,rotate:n,scale:r,transformTopLeft:"\n        translate("+e[0]+"px, "+e[1]+"px)\n        rotate("+n+")\n        scale("+r+")\n      ",transform5050:o("\n          translate("+e[0]+"px, "+e[1]+"px)\n          rotate("+n+")\n          scale("+r+")",(0,d.center_world)(_.state))}}function y(){var e=h(_.transform);return t(e),e}var _=new u.default(e),j={isPanning:!1,panStart:null,panEnd:null};return{get state(){return _.state},get transform(){return _.transform},get options(){return _.options},get scale(){return _.state.scale},get translate(){return _.state.world_container},get offset(){return _.state.container_document},get rotation(){return _.state.theta},get worldSize(){return _.state.worldSize},get containerSize(){return _.state.containerSize},get theta(){return _.state.theta},get minZoom(){return(0,s.scaleLimit)(_.state,_.options,_.options.fitNoWhitespace?Math.max:Math.min)},isZoomedOut:n,setDimensions:r,setOptions:_.setOptions,setContainerOrigin:_.setContainerOrigin,zoomAtMouse:i,zoomBy:c,panBy:g,panStart:p,panMove:m,panEnd:b,resetContainerSize:o,publish:y,debug:{decorate:h,view:_}}}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=t[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!e||n.length!==e);r=!0);}catch(t){o=!0,a=t}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.default=o;var i=n(9),u=r(i),c=n(2),f=r(c),d=n(3),s=n(5),l=function(t){var e=t.pageX,n=t.pageY;return[e,n]},v=function(t,e){if("number"!=typeof e.pageX||"number"!=typeof e.pageY)throw new Error("Trying to "+t+" without { pageX, pageY }. Check your event handler.")}},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function o(t){function e(t){return d.bounded(M.minZoom,t,M.maxZoom)}function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};M=a({},M,t)}function r(t,e){var n=j((0,s.set)("worldSize",[t,e]));O=(0,s.reduce)(n,O)}function o(t,e){var n=j((0,s.set)("containerSize",[t,e]));O=(0,s.reduce)(n,O)}function f(t,e){O=(0,u.setState)(O,"container_document",[t,e])}function l(t,e){var n=j((0,s.set)("world_container",[t,e]));O=(0,s.reduce)(n,O)}function v(t){O=(0,u.setState)(O,"theta",t)}function p(t){var n=j((0,s.set)("scale",e(t)));O=(0,s.reduce)(n,O)}function m(t,e){var n=t/O.containerSize[0],r=[(0,s.statelessZoom)(n*O.scale,[0,0]),(0,s.set)("containerSize",[t,e])];O=(0,s.reduce)(r,O)}function b(){O=M.fit?(0,s.reduce)([(0,s.set)("scale",-1),(0,s.fit)(M)],O):(0,s.reduce)((0,s.set)("scale",e(1)),O)}function g(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments[1];if(t<=0)throw new Error("zoomBy:: Change must be a positive ratio.");var r=e(O.scale*t);h(r,n)}function h(t,n){var r=n instanceof Array?(0,c.fromDocumentToContainer)(O,n):(0,i.center_container)(O),o=j((0,s.statelessZoom)(e(t),r));O=(0,s.reduce)(o,O)}function y(t){var e=j((0,s.statelessPanBy)(t));O=(0,s.reduce)(e,O)}function _(t,e){var n=e instanceof Array?(0,c.fromDocumentToContainer)(O,e):(0,i.center_container)(O),r=(0,s.statelessRotateBy)(t,n);O=r(O)}function j(t){return[].concat(t,M.fit?(0,s.fit)(M):s.identity)}function w(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=(0,s.scaleLimit)(O,M,M.fitNoWhitespace?Math.max:Math.min),n=O.scale<=M.minZoom+t,r=O.scale<=e+t;return M.fit&&M.minZoom?n||r:M.fit?r:!!M.minZoom&&n}var O={scale:1,theta:0,container_document:[0,0],world_container:[0,0],worldSize:[1,1],containerSize:[1,1]},M=a({fit:!1,fitNoWhitespace:!0,fitMarginX:0,firMarginY:0,maxZoom:void 0,minZoom:void 0},t);return{get options(){return M},get state(){return O},get transform(){return{translate:O.world_container,rotate:O.theta,scale:O.scale}},panBy:y,resetContainerSize:m,resetZoom:b,rotateBy:_,setContainerOrigin:f,setContainerSize:o,setOptions:n,setTheta:v,setWorldOrigin:l,setWorldSize:r,setZoom:p,zoomBy:g,zoomTo:h,isZoomedOut:w}}Object.defineProperty(e,"__esModule",{value:!0});var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};e.default=o;var i=n(3),u=n(6),c=n(4),f=n(1),d=r(f),s=n(5)}])});